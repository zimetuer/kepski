<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  
  <!-- Basic page title -->
  <title>{{ video.title }} - Świat według Kiepskich</title>
  
  <!-- Essential OpenGraph meta tags for Discord embeds -->
  <meta property="og:title" content="{{ video.title }}" />
  <meta property="og:type" content="video.other" />
  <meta property="og:url" content="{{ video_url }}" />
  <meta property="og:site_name" content="Świat według Kiepskich" />
  <meta property="og:description" content="Episode {{ video.episode_num }} of {{ total_episodes }} - Watch online" />
  
  <!-- Video-specific OpenGraph tags -->
  <meta property="og:video" content="{{ video.url }}" />
  <meta property="og:video:url" content="{{ video.url }}" />
  <meta property="og:video:secure_url" content="{{ video.url }}" />
  <meta property="og:video:type" content="video/mp4" />
  <meta property="og:video:width" content="1280" />
  <meta property="og:video:height" content="720" />
  
  <!-- Thumbnail for Discord embed -->
  <meta property="og:image" content="{{ url_for('static', filename='thumbnails/episode_' + video.episode_num|string + '.jpg', _external=True) }}" />
  <meta property="og:image:width" content="1280" />
  <meta property="og:image:height" content="720" />
  
  <!-- Twitter Card tags -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="{{ video.title }}" />
  <meta name="twitter:description" content="Episode {{ video.episode_num }} of {{ total_episodes }} - Watch online" />
  <meta name="twitter:image" content="{{ url_for('static', filename='thumbnails/episode_' + video.episode_num|string + '.jpg', _external=True) }}" />
  
  <!-- Additional metadata -->
  <meta name="description" content="Watch {{ video.title }} - Episode {{ video.episode_num }} of {{ total_episodes }}" />
  <meta name="theme-color" content="#4a76a8" />
  
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen,
        Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
      line-height: 1.6;
      margin: 0;
      padding: 0;
      color: #333;
      background-color: #f5f5f5;
    }
    
    .container {
      max-width: 1000px;
      margin: 0 auto;
      padding: 20px;
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      margin-top: 20px;
      margin-bottom: 20px;
    }
    
    header {
      margin-bottom: 20px;
      border-bottom: 1px solid #eee;
      padding-bottom: 10px;
    }
    
    h1 {
      font-size: 24px;
      margin-bottom: 15px;
      color: #222;
    }
    
    .video-container {
      position: relative;
      width: 100%;
      background-color: #000;
      margin-bottom: 20px;
      border-radius: 4px;
      overflow: hidden;
    }
    
    video {
      width: 100%;
      height: auto;
      display: block;
    }
    
    .navigation {
      display: flex;
      justify-content: space-between;
      margin-top: 20px;
      padding-top: 15px;
      border-top: 1px solid #eee;
    }
    
    .nav-button {
      display: inline-block;
      padding: 8px 16px;
      background-color: #4a76a8;
      color: white;
      text-decoration: none;
      border-radius: 4px;
      font-weight: 500;
      transition: background-color 0.2s;
    }
    
    .nav-button:hover {
      background-color: #3a5b89;
    }
    
    .nav-button.disabled {
      background-color: #cccccc;
      cursor: not-allowed;
    }
    
    .episode-info {
      margin-bottom: 20px;
      font-size: 14px;
      color: #666;
    }
    
    .embed-info {
      margin-top: 30px;
      padding: 15px;
      background-color: #f9f9f9;
      border-radius: 4px;
      font-size: 14px;
      border-left: 4px solid #4a76a8;
    }
    
    .discord-link {
      padding: 15px;
      background-color: #f0f7ff;
      border-radius: 4px;
      margin-top: 20px;
      border: 1px solid #c3deff;
    }
    
    .discord-link code {
      display: block;
      padding: 8px;
      background-color: #fff;
      border: 1px solid #ddd;
      border-radius: 4px;
      margin-top: 5px;
      font-family: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      word-break: break-all;
    }
    
    footer {
      margin-top: 30px;
      text-align: center;
      font-size: 14px;
      color: #777;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>{{ video.title }}</h1>
      <div class="episode-info">
        Episode {{ video.episode_num }} of {{ total_episodes }}
      </div>
    </header>
    
    <div class="video-container">
      <video controls autoplay>
        <source src="{{ video.url }}" type="video/mp4">
        Your browser does not support the video tag.
      </video>
    </div>
    
    <div class="discord-link">
      <p><strong>Share this video on Discord:</strong></p>
      <code>{{ video_url }}</code>
      <p>When posted in Discord, this link will automatically embed the video player.</p>
    </div>
    
    <div class="embed-info">
      <p><strong>How Discord embedding works:</strong></p>
      <p>This page includes special metadata tags that tell Discord how to embed the video. When you share this link in Discord, it will automatically create a video player that can be played directly within Discord.</p>
    </div>
    
    <div class="navigation">
      {% if prev_id %}
      <a href="{{ url_for('episode', episode_id=prev_id) }}" class="nav-button">← Previous Episode</a>
      {% else %}
      <span class="nav-button disabled">← Previous Episode</span>
      {% endif %}
      
      <a href="{{ url_for('index') }}" class="nav-button">All Episodes</a>
      
      {% if next_id %}
      <a href="{{ url_for('episode', episode_id=next_id) }}" class="nav-button">Next Episode →</a>
      {% else %}
      <span class="nav-button disabled">Next Episode →</span>
      {% endif %}
    </div>
    
    <footer>
      <p>Świat według Kiepskich Video Library</p>
    </footer>
  </div>
</body>
</html>